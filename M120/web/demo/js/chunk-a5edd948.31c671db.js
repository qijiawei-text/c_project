(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a5edd948"],{2017:function(e,t,n){"use strict";var o=n("cafe"),i=n.n(o);i.a},4071:function(e,t,n){"use strict";var o=n("dde1"),i=n.n(o);i.a},"9ed6":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container pull-height blur",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}}},[n("div",{staticClass:"login-border animated fadeInRight"},[n("div",{staticClass:"login-main"},[n("h4",{staticClass:"login-title"},[e._v("登录"+e._s(e.website.title))]),n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"用户密码",name:"user"}},[n("userLogin")],1)],1)],1)])])},i=[],s=n("5530"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"status-icon":"",rules:e.loginRules,model:e.loginForm,"label-width":"0"}},[n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}},[n("i",{staticClass:"icon-yonghu",attrs:{slot:"prefix"},slot:"prefix"})])],1),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{size:"small",type:e.passwordType,"auto-complete":"off",placeholder:"请输入密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[n("i",{staticClass:"el-icon-view el-input__icon",attrs:{slot:"suffix"},on:{click:e.showPassword},slot:"suffix"}),n("i",{staticClass:"icon-mima",attrs:{slot:"prefix"},slot:"prefix"})])],1),n("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住账号")]),n("el-form-item",[n("el-button",{staticClass:"login-submit",attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("登录")])],1)],1)},l=[];n("c975"),n("498a");function a(e){var t=["admin","editor","user"];return t.indexOf(e.trim())>=0}function u(e){if("boolean"===typeof e)return!1;if(e instanceof Array){if(0===e.length)return!0}else{if(!(e instanceof Object))return"null"===e||null==e||"undefined"===e||void 0===e||""===e;if("{}"===JSON.stringify(e))return!0}return!1}function c(e){var t=[],n=!0,o="",i=/^0\d{2,3}-?\d{7,8}$/;return u(e)?o="手机号码不能为空":11===e.length?i.test(e)?o="手机号码格式不正确":n=!1:o="手机号码长度不为11位",t.push(n),t.push(o),t}var m={name:"userlogin",data:function(){var e=this,t=function(e,t,n){a(t)?n():n(new Error("请输入正确的用户名"))},n=function(t,n,o){e.code.value!==n?(e.loginForm.code="",e.refreshCode(),o(new Error("请输入正确的验证码"))):o()};return{loginForm:{username:"admin",password:"123456"},checked:!1,code:{src:"",value:"",len:4,type:"text"},loginRules:{username:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度最少为6位",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:4,max:4,message:"验证码长度为4位",trigger:"blur"},{required:!0,trigger:"blur",validator:n}]},passwordType:"password"}},created:function(){},mounted:function(){},computed:{},props:[],methods:{showPassword:function(){""===this.passwordType?this.passwordType="password":this.passwordType=""},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){t&&e.$store.dispatch("Login",e.loginForm).then((function(t){e.$router.push({path:"/"})}))}))}}},g=m,d=n("2877"),p=Object(d["a"])(g,r,l,!1,null,null,null),f=p.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"status-icon":"",rules:e.loginRules,model:e.loginForm,"label-width":"0"}},[n("el-form-item",{attrs:{prop:"phone"}},[n("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入手机号码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.phone,callback:function(t){e.$set(e.loginForm,"phone",t)},expression:"loginForm.phone"}},[n("i",{staticClass:"icon-shouji",attrs:{slot:"prefix"},slot:"prefix"})])],1),n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}},[n("i",{staticClass:"icon-yanzhengma yanzhengma",attrs:{slot:"prefix"},slot:"prefix"}),n("template",{slot:"append"},[n("span",{staticClass:"msg-text",class:[{display:e.msgKey}],on:{click:e.handleSend}},[e._v(e._s(e.msgText))])])],2)],1),n("el-form-item",[n("el-button",{staticClass:"login-submit",attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("登录")])],1)],1)},x=[],v=(n("ac1f"),n("5319"),"发送验证码"),w="${time}秒后重发",y=60,k={name:"codelogin",data:function(){var e=function(e,t,n){c(t)[0]?n(new Error(c(t)[1])):n()},t=function(e,t,n){4!==t.length?n(new Error("请输入4位数的验证码")):n()};return{msgText:v,msgTime:y,msgKey:!1,loginForm:{phone:"17547400800",code:""},loginRules:{phone:[{required:!0,trigger:"blur",validator:e}],code:[{required:!0,trigger:"blur",validator:t}]}}},created:function(){},mounted:function(){},computed:{},props:[],methods:{handleSend:function(){var e=this;if(!this.msgKey){this.msgText=w.replace("${time}",this.msgTime),this.msgKey=!0;var t=setInterval((function(){e.msgTime--,e.msgText=w.replace("${time}",e.msgTime),0===e.msgTime&&(e.msgTime=y,e.msgText=v,e.msgKey=!1,clearInterval(t))}),1e3)}},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){t&&e.$store.dispatch("Login",e.loginForm).then((function(t){e.$router.push({path:"/"})}))}))}}},b=k,_=(n("b032"),Object(d["a"])(b,h,x,!1,null,null,null)),F=_.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{directives:[{name:"show",rawName:"v-show",value:!e.islogin,expression:"!islogin"}]},[e._v("请点击授权登录")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.islogin,expression:"!islogin"}],staticStyle:{cursor:"pointer"},attrs:{size:"normal",type:"primary"},on:{click:e.login}},[e._v("登录")]),n("h1",{directives:[{name:"show",rawName:"v-show",value:e.islogin,expression:"islogin"}]},[e._v("已登录")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.islogin,expression:"islogin"}],staticStyle:{cursor:"pointer"},attrs:{size:"normal",type:"primary"},on:{click:e.logout}},[e._v("注销")])],1)},$=[],C=n("4360"),L=n("a18c"),T={name:"ssoIndex1",data:function(){return{islogin:!1}},methods:{checkLogin:function(){return null===sessionStorage.getItem("username")||"null"===sessionStorage.getItem("username")?(console.log("11111111111111111"),!1):(console.log("22222222222222"),!0)},login:function(){console.log("@@@@@@@"+this.$login),this.$login.login(this)},logout:function(){this.$login.logout(this,"http://192.168.1.188:8088/")},createrouter:function(){var e=this;C["a"].dispatch("GenerateRoutes",{roles:"admin"}).then((function(){console.log("555",C["a"].getters.addRouters),L["c"].options.routes=C["a"].getters.addRouters,L["c"].addRoutes(C["a"].getters.addRouters),console.log("666",L["c"]),console.log("777",L["c"]),e.$router.push("/main")}))}},mounted:function(){if(this.islogin=this.checkLogin(),console.log("oauth2login mounted, islogin="+this.islogin),1==this.islogin){var e=sessionStorage.getItem("username");if(console.log("11111111111111username="+e),sessionStorage.getItem("username")){console.log("wwwwwwwwwwwwwwwww="+e);var t={id:"",login:e,avatar_url:""};C["a"].dispatch("SetInfoFromOauth",t).then((function(){console.log("Verification failed, please login again")})),console.log("save username................."+t.login),console.log("username="+e),console.log("xxxxxxxxxx createrouter start xxxxxxxxxxxx"),this.createrouter(),console.log("xxxxxxxxxx createrouter finished xxxxxxxxxxxx")}else console.log("username is  nullllllllll=")}}},E=T,z=(n("4071"),Object(d["a"])(E,O,$,!1,null,null,null)),R=z.exports,S=n("2f62"),I={name:"login",components:{userLogin:f,codeLogin:F,oauth2Login:R},data:function(){return{activeName:"user"}},created:function(){},mounted:function(){},computed:Object(s["a"])({},Object(S["b"])(["website"])),props:[],methods:{}},N=I,j=(n("2017"),Object(d["a"])(N,o,i,!1,null,null,null));t["default"]=j.exports},b032:function(e,t,n){"use strict";var o=n("d7df"),i=n.n(o);i.a},cafe:function(e,t,n){},d7df:function(e,t,n){},dde1:function(e,t,n){}}]);